import{b as a,C as l,D as s,E as e,s as t,d as o,e as i,G as n,H as u,f as r,g as p,c,w as d,h as g,i as m,o as _,a as v,z as f,j as y,k as w,F as L,u as h,p as j}from"./main-CId4jkw5.js";import{_ as k}from"./uni-load-more.CZ4E_YOB.js";import{f as W,g as b}from"./apis.SOyhLe5P.js";import{g as x}from"./common.BgLmO8Ai.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=z({__name:"wallpaperList",setup(z){const S=a([]),q={page:1,page_size:12},F=a(!1);let C;l((a=>{console.log("wallpaper_onLoad:",a);let{id:l=null,name:e=null,type:t=null}=a;l||e?(l&&(q.class_id=l),t&&(q.type=t),C=e,s({title:C}),D()):x()})),e((()=>{console.log("到底了",F.value),F.value||(q.page++,get_wallList_by_classify())}));const D=async()=>{let a;console.log("queryParams:",q),q.class_id&&(console.log("apiWallpaper"),a=await W(q)),q.type&&(a=await b(q)),console.log("apiUserWall:",a),S.value=[...S.value,...a.data],a.data.length<q.page_size&&(F.value=!0),t("storeWallList",S.value)};return o((a=>(console.log("分享",a),{title:"小草壁纸-"+C,path:"/pages/wallpaperList/wallpaperList?id="+q.class_id+"&name="+C}))),i((()=>{const a=g();a&&(a.proxy.onShareTimeline=()=>({title:"小草壁纸~~~",query:"id="+q.class_id+"&name="+C}))})),n((()=>{console.log("页面卸载"),u("storeWallList")})),(a,l)=>{const s=r(p("uni-load-more"),k),e=m,t=h,o=j;return _(),c(e,{class:"wallpaperList"},{default:d((()=>[S.value.length||F.value?f("",!0):(_(),c(e,{key:0,class:"loadingLayout"},{default:d((()=>[v(s,{status:"loading"})])),_:1})),v(e,{class:"content"},{default:d((()=>[(_(!0),y(L,null,w(S.value,(a=>(_(),c(e,{class:"item",key:a._id},{default:d((()=>[v(o,{url:"/pages/preview/preview?id="+a._id,class:"img"},{default:d((()=>[v(t,{src:a.small_url,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["url"])])),_:2},1024)))),128))])),_:1}),S.value.length||F.value.value?(_(),c(e,{key:1,class:"loadingLayout"},{default:d((()=>[v(s,{status:F.value?"noMore":"loading"},null,8,["status"])])),_:1})):f("",!0),v(e,{class:"safe-area-inset-bottom"})])),_:1})}}},[["__scopeId","data-v-982100a0"]]);export{S as default};
