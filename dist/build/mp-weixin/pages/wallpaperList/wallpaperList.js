"use strict";const e=require("../../common/vendor.js"),a=require("../../api/apis.js"),t=require("../../utils/common.js");if(!Array){e.resolveComponent("uni-load-more")()}Math;const l={__name:"wallpaperList",setup(l){const o=e.ref([]),n={page:1,page_size:12},i=e.ref(!1);let s;e.onLoad((a=>{let{id:l=null,name:o=null,type:i=null}=a;l||o?(l&&(n.class_id=l),i&&(n.type=i),s=o,e.index.setNavigationBarTitle({title:s}),r()):t.gotoHome()})),e.onReachBottom((()=>{i.value||(n.page++,r())}));const r=async()=>{let t;n.class_id&&(t=await a.apiWallpaper(n)),"score"==n.type&&(t=await a.apiScore({data:n})),"download"==n.type&&(t=await a.apiDownload({data:n})),o.value=[...o.value,...t.data],t.data.length<n.page_size&&(i.value=!0),e.index.setStorageSync("storeWallList",o.value)};return e.onShareAppMessage((e=>({title:"小草壁纸-"+s,path:"/pages/wallpaperList/wallpaperList?id="+n.class_id+"&name="+s}))),e.onMounted((()=>{const a=e.getCurrentInstance();a&&(a.proxy.onShareTimeline=()=>({title:"小草壁纸~~~",query:"id="+n.class_id+"&name="+s}))})),e.onUnload((()=>{e.index.removeStorageSync("storeWallList")})),(a,t)=>e.e({a:!o.value.length&&!i.value},o.value.length||i.value?{}:{b:e.p({status:"loading"})},{c:e.f(o.value,((e,a,t)=>({a:e.small_url,b:"/pages/preview/preview?id="+e._id,c:e._id}))),d:o.value.length||i.value.value},o.value.length||i.value.value?{e:e.p({status:i.value?"noMore":"loading"})}:{})}},o=e._export_sfc(l,[["__scopeId","data-v-a206b56e"]]);l.__runtimeHooks=6,wx.createPage(o);
